<!DOCTYPE html>
<html>

<head>
    <title>Calendrier Zen Flex</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/evo-calendar@1.1.3/evo-calendar/css/evo-calendar.min.css">
    <link rel="stylesheet" href="theme.css">
</head>

<body>

    <div id="calendar"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/evo-calendar@1.1.3/evo-calendar/js/evo-calendar.min.js"></script>

    <script>
        // initialize your calendar, once the page's DOM is ready
        $(document).ready(function () {
            $('#calendar').evoCalendar({
                theme: 'Midnight Blue',
                language: 'fr',
                todayHighlight: true,
            });
            //$('#calendar').evoCalendar('setTheme', 'Royal Navy');
            $.getJSON("https://masfaraud.github.io/ZenFlex/data.json", function (data) {

                console.log(data)
                var now = new Date();
                const options = { weekday: undefined, year: 'numeric', month: 'short', day: 'numeric' };
                for (var d = new Date(2023, 8, 1); d <= now; d.setDate(d.getDate() + 1)) {
                    var formated_date = d.toLocaleDateString('en', options)
                    console.log(formated_date, data['sobriete'].includes(formated_date))
                    if (data['sobriete'].includes(formated_date)) {
                        $('#calendar').evoCalendar('addCalendarEvent', {
                            id: "sobriete" + formated_date,
                            name: 'Jour Sobriété',
                            description: 'Jour sobriété Zen Flex',
                            date: formated_date,
                            type: 'event',
                            color: '#1f4ce7',
                        });
                    }

                    else if (data['bonus'].includes(formated_date)) {
                        $('#calendar').evoCalendar('addCalendarEvent', {
                            id: "sobriete" + formated_date,
                            name: 'Jour Bonus',
                            description: 'Jour Bonus Zen Flex',
                            date: formated_date,
                            type: 'event',
                            color: '#e71f1f',
                        });
                    }

                    else {

                        $('#calendar').evoCalendar('addCalendarEvent', {
                            id: "eco" + formated_date,
                            name: 'Jour éco',
                            description: 'Jour éco',
                            date: formated_date,
                            type: 'event',
                            color: '#1fe76e',
                        });
                    }
                };
        

        }).fail(function () {
            console.log("An error has occurred.");
        });
    });

    </script>

</body>

</html>